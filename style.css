body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    margin:0; padding:10px; color:#333;
    display:flex; justify-content:center;
    background: transparent;
}

/* 테마 변수 */
body.default { --main-bg:#ffffff; --btn-color:#6ea6ff; --selected:#6ea6ff; --dot-color:#555; --dot-size: 6px; }
body.cute { --main-bg:#ffe6f0; --btn-color:#ff9ecf; --selected:#ff9ecf; --dot-color:#d6417e; --dot-size: 6px; }
body.calm { --main-bg:#f5f0e1; --btn-color:#d9b48f; --selected:#d9b48f; --dot-color:#8b5e3c; --dot-size: 6px; }
body.mono { --main-bg:#f0f0f0; --btn-color:#555555; --selected:#555555; --dot-color:#222; --dot-size: 6px; }

#widget-container {
    width:260px; /* 전체 크기 축소 */
    background: var(--main-bg);
    padding:10px;
    border-radius:8px;
    box-shadow:0 1px 3px rgba(0,0,0,0.1);
    position: relative;
}

#calendar-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}
#calendar-header button {
    background:none; border:none; font-size:1.2em; cursor:pointer; color:var(--btn-color);
    border-radius:4px; padding:5px;
}
#calendar-header button:hover { opacity:0.8; }

#calendar-grid {
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:2px;
    text-align:center;
    font-size:0.85em;
}
.day-cell { 
    padding:5px 0; 
    cursor:pointer; 
    border-radius:4px; 
    position:relative; 
    height: 30px; /* 크기 조정에 따라 날짜 셀 높이 고정 */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.day-cell.header { font-weight:bold; }

/* 주말 색상 */
.day-cell.sunday, .day-cell.header:first-child { color:red; }
.day-cell.saturday, .day-cell.header:last-child { color:blue; }

.day-cell.today { font-weight:bold; background:#d1e7ff; }
.day-cell.selected { 
    background:var(--selected); 
    color:white !important; 
}
/* 할 일 점 스타일 및 간격 조정 */
.day-cell .todo-dot { 
    width:var(--dot-size); height:var(--dot-size); 
    background:var(--dot-color); 
    border-radius:50%; 
    position:absolute; 
    bottom: 3px; /* 날짜와의 간격 */
    left:50%; 
    transform:translateX(-50%); 
}

/* 할 일 영역 제거됨 */

/* 액션 바: 할 일 추가 버튼과 테마 선택 버튼 배치 */
#action-bar { 
    display:flex; 
    justify-content: space-between; /* 양쪽 끝으로 배치 */
    align-items:center; 
    gap:5px; 
    margin-top:10px; 
    border-top: 1px solid #eee; /* 구분선 추가 */
    padding-top: 5px;
}
#add-todo-btn { 
    padding:5px; 
    background:none; 
    color:var(--btn-color); 
    border:none; 
    border-radius:4px; 
    cursor:pointer; 
    font-size: 1.2em;
}
#add-todo-btn:hover{ opacity:0.8; background-color: #f0f0f0; }

#theme-selector { display:flex; gap:5px; }
#theme-selector button { background:none; border:none; cursor:pointer; font-size:1.1em; padding:0; }
#theme-selector button:hover { opacity:0.8; }


/* --- 팝업 (Tooltip) 스타일 --- */
#todo-tooltip {
    position: absolute;
    z-index: 1001;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 6px;
    padding: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    width: 200px; /* 팝업 너비 */
    pointer-events: none; /* Tooltip 위에 커서가 있어도 아래 요소에 이벤트 전달 */
}
#todo-tooltip.visible {
    display: block !important;
    pointer-events: auto; /* 내용 클릭을 허용하여 닫기/체크박스 기능 활성화 */
}
#todo-tooltip h5 {
    margin: 0 0 8px 0;
    font-size: 0.9em;
    border-bottom: 1px solid #eee;
    padding-bottom: 5px;
    font-weight: bold;
}
#todo-tooltip ul {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.8em;
}
#todo-tooltip li {
    display: flex;
    align-items: flex-start;
    margin-bottom: 4px;
}
#todo-tooltip input[type="checkbox"] {
    margin-right: 5px;
    flex-shrink: 0;
    margin-top: 2px;
}
#todo-tooltip span.completed {
    text-decoration: line-through;
    color: #888;
}
#todo-tooltip .priority {
    margin-left: 5px;
    flex-shrink: 0;
}


/* 모달 스타일 (이전과 동일) */
.modal { 
    display:none; 
    position:fixed; 
    z-index:1000; 
    left:0; top:0; 
    width:100%; height:100%; 
    background:rgba(0,0,0,0.4); 
    justify-content:center; 
    align-items:center; 
}
.modal-content { background:#fff; padding:15px; width:90%; max-width:250px; border-radius:8px; position:relative; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
.close-btn { position:absolute; top:5px; right:10px; cursor:pointer; font-size:20px; }
.modal-content h4 { margin-top:0; margin-bottom:10px; }
.modal-content label { display:block; font-weight:bold; margin-top:10px; font-size:0.85em; }
.modal-content input, .modal-content select { width:100%; padding:6px; margin-top:5px; border-radius:4px; border:1px solid #ddd; box-sizing:border-box; }
#save-todo-btn { width:100%; padding:8px; margin-top:10px; background:#28a745; color:white; border:none; border-radius:4px; cursor:pointer; }
#save-todo-btn:hover{ opacity:0.9; }
